Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@urql/core"),t=require("wonka"),r=require("svelte/store"),a=require("svelte"),n=e=>t.make((t=>e.subscribe(t.next))),s={operation:void 0,fetching:!1,data:void 0,error:void 0,extensions:void 0,hasNext:!1,stale:!1},o=e=>({isPaused$:e,pause(){e.set(!0)},resume(){e.set(!1)}}),i="$$_urql",u=e=>{a.setContext(i,e)};exports.getContextClient=()=>a.getContext(i),exports.initContextClient=t=>{var r=new e.Client(t);return u(r),r},exports.mutationStore=function(a){var n=e.createRequest(a.query,a.variables),o=a.client.createRequestOperation("mutation",n,a.context),i={...s,operation:o,fetching:!0},u=r.writable(i),c=t.subscribe((e=>{u.set(e)}))(t.scan(((e,t)=>({...e,...t})),i)(t.map((({stale:e,data:t,error:r,extensions:a,operation:n,hasNext:s})=>({fetching:!1,stale:e,data:t,error:r,operation:n,extensions:a,hasNext:s})))(a.client.executeRequestOperation(o))));return r.derived(u,((e,t)=>(t(e),c.unsubscribe)))},exports.queryStore=function(a){var i=e.createRequest(a.query,a.variables),u={requestPolicy:a.requestPolicy,...a.context},c=a.client.createRequestOperation("query",i,u),l=r.writable(c),p={...s,operation:c},x=r.writable(!!a.pause),b=r.writable(p,(()=>t.subscribe((e=>{b.set(e)}))(t.scan(((e,t)=>({...e,...t})),p)(t.switchMap((e=>e?t.never:t.switchMap((e=>t.concat([t.fromValue({fetching:!0,stale:!1,hasNext:!1}),t.map((({stale:e,data:t,error:r,extensions:a,operation:n,hasNext:s})=>({fetching:!1,stale:!!e,data:t,error:r,operation:n,extensions:a,hasNext:s})))(a.client.executeRequestOperation(e)),t.fromValue({fetching:!1,hasNext:!1})])))(n(l))))(n(x)))).unsubscribe));return{...r.derived(b,((e,t)=>{t(e)})),...o(x),reexecute:e=>{var t={...e,...a.context},r=a.client.createRequestOperation("query",i,t);x.set(!1),l.set(r)}}},exports.setContextClient=u,exports.subscriptionStore=function(a,i){var u=e.createRequest(a.query,a.variables),c=a.client.createRequestOperation("subscription",u,a.context),l={...s,operation:c,fetching:!0},p=r.writable(!!a.pause),x=r.writable(l,(()=>t.subscribe((e=>{x.set(e)}))(t.scan(((e,t)=>{var r=null!=t.data?"function"==typeof i?i(e.data,t.data):t.data:e.data;return{...e,...t,data:r}}),l)(t.switchMap((e=>e?t.never:t.concat([t.fromValue({fetching:!0,stale:!1}),t.map((({stale:e,data:t,error:r,extensions:a,operation:n})=>({fetching:!0,stale:!!e,data:t,error:r,operation:n,extensions:a})))(a.client.executeRequestOperation(c)),t.fromValue({fetching:!1})])))(n(p)))).unsubscribe));return{...r.derived(x,((e,t)=>{t(e)})),...o(p)}},Object.keys(e).forEach((function(t){"default"===t||Object.prototype.hasOwnProperty.call(exports,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}})}));
//# sourceMappingURL=urql-svelte.min.js.map

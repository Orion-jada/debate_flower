import{createRequest as e,Client as t}from"@urql/core";export*from"@urql/core";import{make as r,subscribe as a,scan as n,switchMap as o,never as s,concat as i,fromValue as u,map as c}from"wonka";import{writable as l,derived as p}from"svelte/store";import{getContext as x,setContext as f}from"svelte";var d=e=>r((t=>e.subscribe(t.next))),h={operation:void 0,fetching:!1,data:void 0,error:void 0,extensions:void 0,hasNext:!1,stale:!1},q=e=>({isPaused$:e,pause(){e.set(!0)},resume(){e.set(!1)}});function v(t){var r=e(t.query,t.variables),x={requestPolicy:t.requestPolicy,...t.context},f=t.client.createRequestOperation("query",r,x),v=l(f),b={...h,operation:f},m=l(!!t.pause),g=l(b,(()=>a((e=>{g.set(e)}))(n(((e,t)=>({...e,...t})),b)(o((e=>e?s:o((e=>i([u({fetching:!0,stale:!1,hasNext:!1}),c((({stale:e,data:t,error:r,extensions:a,operation:n,hasNext:o})=>({fetching:!1,stale:!!e,data:t,error:r,operation:n,extensions:a,hasNext:o})))(t.client.executeRequestOperation(e)),u({fetching:!1,hasNext:!1})])))(d(v))))(d(m)))).unsubscribe));return{...p(g,((e,t)=>{t(e)})),...q(m),reexecute:e=>{var a={...e,...t.context},n=t.client.createRequestOperation("query",r,a);m.set(!1),v.set(n)}}}function b(t){var r=e(t.query,t.variables),o=t.client.createRequestOperation("mutation",r,t.context),s={...h,operation:o,fetching:!0},i=l(s),u=a((e=>{i.set(e)}))(n(((e,t)=>({...e,...t})),s)(c((({stale:e,data:t,error:r,extensions:a,operation:n,hasNext:o})=>({fetching:!1,stale:e,data:t,error:r,operation:n,extensions:a,hasNext:o})))(t.client.executeRequestOperation(o))));return p(i,((e,t)=>(t(e),u.unsubscribe)))}function m(t,r){var x=e(t.query,t.variables),f=t.client.createRequestOperation("subscription",x,t.context),v={...h,operation:f,fetching:!0},b=l(!!t.pause),m=l(v,(()=>a((e=>{m.set(e)}))(n(((e,t)=>{var a=null!=t.data?"function"==typeof r?r(e.data,t.data):t.data:e.data;return{...e,...t,data:a}}),v)(o((e=>e?s:i([u({fetching:!0,stale:!1}),c((({stale:e,data:t,error:r,extensions:a,operation:n})=>({fetching:!0,stale:!!e,data:t,error:r,operation:n,extensions:a})))(t.client.executeRequestOperation(f)),u({fetching:!1})])))(d(b)))).unsubscribe));return{...p(m,((e,t)=>{t(e)})),...q(b)}}var g="$$_urql",y=()=>x(g),N=e=>{f(g,e)},O=e=>{var r=new t(e);return N(r),r};export{y as getContextClient,O as initContextClient,b as mutationStore,v as queryStore,N as setContextClient,m as subscriptionStore};
//# sourceMappingURL=urql-svelte.min.mjs.map
